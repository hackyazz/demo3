

import * as Curry from "../../../../../../node_modules/bs-platform/lib/es6/curry.js";
import * as Sinon from "../../../../../../node_modules/wonder-bs-sinon/lib/es6_global/src/sinon.js";
import * as Sinon$1 from "sinon";
import * as Wonder_jest from "../../../../../../node_modules/wonder-bs-jest/lib/es6_global/src/wonder_jest.js";
import * as Js_primitive from "../../../../../../node_modules/bs-platform/lib/es6/js_primitive.js";
import * as MainUtils$WonderEditor from "../../../../src/core/utils/engine/MainUtils.js";
import * as SinonTool$WonderEditor from "../../../tool/SinonTool.js";
import * as OptionService$WonderEditor from "../../../../src/service/primitive/OptionService.js";
import * as CameraPosUtils$WonderEditor from "../../../../src/core/utils/engine/job/init/initTransformGizmosJob/rotation/CameraPosUtils.js";
import * as FakeGlToolEngine$WonderEditor from "../../../tool/engine/FakeGlToolEngine.js";
import * as ProgramToolEngine$WonderEditor from "../../../tool/engine/ProgramToolEngine.js";
import * as SettingToolEngine$WonderEditor from "../../../tool/engine/SettingToolEngine.js";
import * as StateLogicService$WonderEditor from "../../../../src/service/stateTuple/logic/StateLogicService.js";
import * as DirectorToolEngine$WonderEditor from "../../../tool/engine/DirectorToolEngine.js";
import * as GeometryToolEngine$WonderEditor from "../../../tool/engine/GeometryToolEngine.js";
import * as StateEditorService$WonderEditor from "../../../../src/service/state/editor/StateEditorService.js";
import * as StateEngineService$WonderEditor from "../../../../src/service/state/engine/state/StateEngineService.js";
import * as MainEditorSceneTool$WonderEditor from "../../../tool/MainEditorSceneTool.js";
import * as TransformGizmosTool$WonderEditor from "../tool/TransformGizmosTool.js";
import * as MainEditorCameraTool$WonderEditor from "../../../tool/MainEditorCameraTool.js";
import * as GeometryEngineService$WonderEditor from "../../../../src/service/state/engine/GeometryEngineService.js";
import * as GLSLLocationToolEngine$WonderEditor from "../../../tool/engine/GLSLLocationToolEngine.js";
import * as TransformEngineService$WonderEditor from "../../../../src/service/state/engine/TransformEngineService.js";
import * as NoWorkerJobConfigToolEngine$WonderEditor from "../../../tool/engine/NoWorkerJobConfigToolEngine.js";
import * as NoMaterialShaderEngineService$WonderEditor from "../../../../src/service/state/engine/NoMaterialShaderEngineService.js";
import * as GameObjectComponentEngineService$WonderEditor from "../../../../src/service/state/engine/gameObject/GameObjectComponentEngineService.js";
import * as MainEditorInspectorAddComponentTool$WonderEditor from "../../inspector/atom_component/addableComponent/tool/MainEditorInspectorAddComponentTool.js";
import * as OperateRotationGizmoSceneViewEditorService$WonderEditor from "../../../../src/service/state/editor/view/sceneView/transform/rotation/OperateRotationGizmoSceneViewEditorService.js";
import * as CurrentTransformGizmoSceneViewEditorService$WonderEditor from "../../../../src/service/state/editor/view/sceneView/transform/CurrentTransformGizmoSceneViewEditorService.js";
import * as OperateTranslationGizmoSceneViewEditorService$WonderEditor from "../../../../src/service/state/editor/view/sceneView/transform/translation/OperateTranslationGizmoSceneViewEditorService.js";

describe("render transform gizmos job", (function () {
        var sandbox = Sinon.getSandboxDefaultVal(/* () */0);
        beforeEach((function () {
                sandbox[0] = Sinon$1.sandbox.create();
                MainEditorSceneTool$WonderEditor.initStateWithJob(sandbox, NoWorkerJobConfigToolEngine$WonderEditor.buildNoWorkerJobConfig(undefined, "\n            [\n        {\n          \"name\": \"default\",\n          \"jobs\": [\n            {\n              \"name\": \"init_transform_gizmos\"\n            },\n      {\n        \"name\": \"init_no_material_shader\"\n      },\n            {\n              \"name\": \"init_basic_material\"\n            },\n            {\n              \"name\": \"init_light_material\"\n            }\n          ]\n        }\n      ]\n            ", "\n             [\n         {\n           \"name\": \"default\",\n           \"jobs\": [\n            {\n                \"name\": \"get_camera_data\"\n            },\n            {\n                \"name\": \"create_basic_render_object_buffer\"\n            },\n            {\n                \"name\": \"create_light_render_object_buffer\"\n            },\n{\"name\": \"render_transform_gizmos\" }\n           ]\n         }\n       ]\n             ", undefined, undefined, /* () */0), SettingToolEngine$WonderEditor.buildBufferConfigStr(undefined, 100, 100, 100, 100, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), undefined, false, undefined, /* () */0);
                return MainEditorSceneTool$WonderEditor.createDefaultSceneAndNotInit(sandbox);
              }));
        afterEach((function () {
                return Curry._1(Sinon.restoreSandbox, sandbox[0]);
              }));
        describe("if has current scene tree node", (function () {
                beforeEach((function () {
                        return MainEditorSceneTool$WonderEditor.setFirstCubeToBeCurrentSceneTreeNode(/* () */0);
                      }));
                Wonder_jest.test("if current scene tree node has arcballCameraController component, not render gizmo", (function () {
                        MainEditorInspectorAddComponentTool$WonderEditor.addArcballCameraControllerComponent(undefined, undefined, undefined, /* () */0);
                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                        var drawElements = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(drawElements), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                        var engineState$2 = MainUtils$WonderEditor._handleEngineState(engineState$1);
                        StateLogicService$WonderEditor.getAndSetEditorState(CurrentTransformGizmoSceneViewEditorService$WonderEditor.markScale);
                        var engineState$3 = DirectorToolEngine$WonderEditor.runWithDefaultTime(engineState$2);
                        StateEditorService$WonderEditor.getState(/* () */0);
                        var match = GeometryEngineService$WonderEditor.createCubeGeometry(engineState$3);
                        return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(match[1], match[0]), drawElements))), 0);
                      }));
                describe("else", (function () {
                        describe("render translation gizmos", (function () {
                                describe("render axis gizmos", (function () {
                                        var _getArrowGeometry = function (editorState, engineState) {
                                          return GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(TransformGizmosTool$WonderEditor.getArrowGameObject(editorState, engineState), engineState);
                                        };
                                        var _getLineGeometry = function (editorState, engineState) {
                                          return GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState), engineState);
                                        };
                                        describe("prepare gl state", (function () {
                                                return Wonder_jest.test("disable depth test", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                              return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, disable)));
                                                            }));
                                              }));
                                        Wonder_jest.test("use one program", (function () {
                                                var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                var useProgram = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(useProgram), undefined, /* () */0), engineState);
                                                DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(useProgram)), 1);
                                              }));
                                        describe("send gl data", (function () {
                                                describe("send attribute", (function () {
                                                        describe("init vbo buffers when first send", (function () {
                                                                var _prepareForBufferData = function (arrowPoints, linePoints, countTuple) {
                                                                  var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                  var bufferData = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                  var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(bufferData), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                  DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                  return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                                  Sinon.getCallCount(Sinon.withThreeArgs(1, arrowPoints, 2, bufferData)),
                                                                                  Sinon.getCallCount(Sinon.withThreeArgs(1, linePoints, 2, bufferData))
                                                                                ]), countTuple);
                                                                };
                                                                beforeEach((function () {
                                                                        return StateLogicService$WonderEditor.getAndSetEngineState(MainUtils$WonderEditor._handleEngineState);
                                                                      }));
                                                                describe("init vertex buffer", (function () {
                                                                        return Wonder_jest.test("bufferData arrow and line vertices three times", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      return _prepareForBufferData(GeometryToolEngine$WonderEditor.getGameObjectVertices(TransformGizmosTool$WonderEditor.getArrowGameObject(editorState, engineState), engineState), GeometryToolEngine$WonderEditor.getGameObjectVertices(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState), engineState), /* tuple */[
                                                                                                  3,
                                                                                                  3
                                                                                                ]);
                                                                                    }));
                                                                      }));
                                                                describe("not init texCoord buffer", (function () {
                                                                        return Wonder_jest.test("not bufferData arrow and line texCoords", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      return _prepareForBufferData(GeometryToolEngine$WonderEditor.getGameObjectTexCoords(TransformGizmosTool$WonderEditor.getArrowGameObject(editorState, engineState), engineState), GeometryToolEngine$WonderEditor.getGameObjectTexCoords(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState), engineState), /* tuple */[
                                                                                                  0,
                                                                                                  0
                                                                                                ]);
                                                                                    }));
                                                                      }));
                                                                describe("init index buffer", (function () {
                                                                        return Wonder_jest.test("bufferData", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      var bufferData = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(bufferData), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(engineState$1);
                                                                                      var arrowIndices = GeometryToolEngine$WonderEditor.getGameObjectIndices16(TransformGizmosTool$WonderEditor.getArrowGameObject(editorState, engineState$2), engineState$2);
                                                                                      var lineIndices = GeometryToolEngine$WonderEditor.getGameObjectIndices16(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState$2), engineState$2);
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                                                      Sinon.getCallCount(Sinon.withThreeArgs(1, arrowIndices, 2, bufferData)),
                                                                                                      Sinon.getCallCount(Sinon.withThreeArgs(1, lineIndices, 2, bufferData))
                                                                                                    ]), /* tuple */[
                                                                                                  3,
                                                                                                  3
                                                                                                ]);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                describe("send uniform data", (function () {
                                                        describe("test send model data", (function () {
                                                                describe("send u_mMatrix", (function () {
                                                                        return Wonder_jest.test("test send each axis->arrow and line gameObjects->u_mMatrix", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniformMatrix4fv = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_mMatrix");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniformMatrix4fv), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(10, uniformMatrix4fv))), 6);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        describe("test send material data", (function () {
                                                                describe("send u_alpha", (function () {
                                                                        return Wonder_jest.test("test send axis gameObjects->u_alpha with 1.0", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform1f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_alpha");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform1f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(10, 1.0, uniform1f))), 1);
                                                                                    }));
                                                                      }));
                                                                describe("send u_color", (function () {
                                                                        return Wonder_jest.test("test send each axis gameObject->u_color", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform3f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_color");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform3f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(10, uniform3f))), 3);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                return /* () */0;
                                              }));
                                        describe("draw", (function () {
                                                return Wonder_jest.test("draw each axis->arrow and line gameObjects", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var drawElements = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(drawElements), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                              var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                              return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                              Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(_getArrowGeometry(editorState, engineState$2), engineState$2), drawElements)),
                                                                              Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(_getLineGeometry(editorState, engineState$2), engineState$2), drawElements))
                                                                            ]), /* tuple */[
                                                                          3,
                                                                          3
                                                                        ]);
                                                            }));
                                              }));
                                        describe("restore gl state", (function () {
                                                return Wonder_jest.test("enable depth test", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                              return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, enable)));
                                                            }));
                                              }));
                                        return /* () */0;
                                      }));
                                describe("render plane gizmos", (function () {
                                        describe("prepare gl state", (function () {
                                                Wonder_jest.test("disable depth write", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var depthMask = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(depthMask), undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[false], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, depthMask)));
                                                      }));
                                                Wonder_jest.test("disable depth test", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(1, disable)));
                                                      }));
                                                Wonder_jest.test("set side to both", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(2, disable)));
                                                      }));
                                                describe("open blend", (function () {
                                                        Wonder_jest.test("enable blend", (function () {
                                                                var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(1, enable)));
                                                              }));
                                                        return Wonder_jest.test("set blend func", (function () {
                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                      var blendFunc = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(blendFunc), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                      return Sinon.toCalledWith(/* array */[
                                                                                  1,
                                                                                  2
                                                                                ], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, blendFunc)));
                                                                    }));
                                                      }));
                                                return /* () */0;
                                              }));
                                        Wonder_jest.test("use the same program", (function () {
                                                var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                var useProgram = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(useProgram), undefined, /* () */0), engineState);
                                                DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(useProgram)), 1);
                                              }));
                                        describe("send gl data", (function () {
                                                describe("send attribute", (function () {
                                                        describe("init vbo buffers when first send", (function () {
                                                                var _prepareForBufferData = function (planePoints, count) {
                                                                  var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                  var bufferData = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                  var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(bufferData), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                  DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                  return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withThreeArgs(1, planePoints, 2, bufferData))), count);
                                                                };
                                                                beforeEach((function () {
                                                                        return StateLogicService$WonderEditor.getAndSetEngineState(MainUtils$WonderEditor._handleEngineState);
                                                                      }));
                                                                describe("init vertex buffer", (function () {
                                                                        return Wonder_jest.test("bufferData plane vertices three times", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      return _prepareForBufferData(GeometryToolEngine$WonderEditor.getGameObjectVertices(GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(OperateTranslationGizmoSceneViewEditorService$WonderEditor.unsafeGetTranslationXYPlaneGizmo(editorState), engineState), engineState), 3);
                                                                                    }));
                                                                      }));
                                                                describe("not init texCoord buffer", (function () {
                                                                        return Wonder_jest.test("bufferData arrow and line texCoords three times", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      return _prepareForBufferData(GeometryToolEngine$WonderEditor.getGameObjectTexCoords(GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(OperateTranslationGizmoSceneViewEditorService$WonderEditor.unsafeGetTranslationXYPlaneGizmo(editorState), engineState), engineState), 0);
                                                                                    }));
                                                                      }));
                                                                describe("init index buffer", (function () {
                                                                        return Wonder_jest.test("bufferData", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      var bufferData = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(bufferData), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(engineState$1);
                                                                                      GeometryToolEngine$WonderEditor.getGameObjectIndices16(TransformGizmosTool$WonderEditor.getArrowGameObject(editorState, engineState$2), engineState$2);
                                                                                      GeometryToolEngine$WonderEditor.getGameObjectIndices16(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState$2), engineState$2);
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withThreeArgs(1, GeometryEngineService$WonderEditor.getGeometryIndices16(GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(OperateTranslationGizmoSceneViewEditorService$WonderEditor.unsafeGetTranslationXYPlaneGizmo(editorState), engineState$2), engineState$2), 2, bufferData))), 3);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                describe("send uniform data", (function () {
                                                        describe("test send model data", (function () {
                                                                describe("send u_mMatrix", (function () {
                                                                        return Wonder_jest.test("test 3 plane gameObjects->u_mMatrix", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniformMatrix4fv = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_mMatrix");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniformMatrix4fv), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(10, uniformMatrix4fv))), 3);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        describe("test send material data", (function () {
                                                                describe("send u_alpha", (function () {
                                                                        return Wonder_jest.test("test send 3 planes->u_alpha with 0.3", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform1f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_alpha");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform1f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(10, 0.30000001192092896, uniform1f))), 1);
                                                                                    }));
                                                                      }));
                                                                describe("send u_color", (function () {
                                                                        return Wonder_jest.test("test send 3 plane gameObjects->u_color", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform3f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_color");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform3f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(10, uniform3f))), 3);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                return /* () */0;
                                              }));
                                        describe("draw", (function () {
                                                return Wonder_jest.test("draw 3 plane gameObjects", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var drawElements = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(drawElements), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                              var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                              return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(OperateTranslationGizmoSceneViewEditorService$WonderEditor.unsafeGetTranslationXYPlaneGizmo(editorState), engineState$2), engineState$2), drawElements))), 3);
                                                            }));
                                              }));
                                        describe("restore gl state", (function () {
                                                Wonder_jest.test("enable depth write", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var depthMask = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(depthMask), undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[true], Wonder_jest.Expect[/* expect */0](Sinon.getCall(1, depthMask)));
                                                      }));
                                                Wonder_jest.test("enable depth test", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(2, enable)));
                                                      }));
                                                Wonder_jest.test("set side to front", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var cullFace = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 2, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, Js_primitive.some(cullFace), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                        var __x = Sinon.getCall(3, enable);
                                                        var __x$1 = Sinon.getCall(0, cullFace);
                                                        return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                        SinonTool$WonderEditor.calledWith(__x, 1),
                                                                        SinonTool$WonderEditor.calledWith(__x$1, 2)
                                                                      ]), /* tuple */[
                                                                    true,
                                                                    true
                                                                  ]);
                                                      }));
                                                return Wonder_jest.test("disable blend", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 10, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              DirectorToolEngine$WonderEditor.runWithDefaultTime(MainUtils$WonderEditor._handleEngineState(engineState$1));
                                                              return Sinon.toCalledWith(/* array */[10], Wonder_jest.Expect[/* expect */0](Sinon.getCall(3, disable)));
                                                            }));
                                              }));
                                        return /* () */0;
                                      }));
                                return /* () */0;
                              }));
                        describe("render rotation gizmos", (function () {
                                describe("render circle gizmos", (function () {
                                        var _handleEngineState = function (engineState) {
                                          var engineState$1 = MainUtils$WonderEditor._handleEngineState(engineState);
                                          StateLogicService$WonderEditor.getAndSetEditorState(CurrentTransformGizmoSceneViewEditorService$WonderEditor.markRotation);
                                          return engineState$1;
                                        };
                                        describe("prepare gl state", (function () {
                                                Wonder_jest.test("disable depth test", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, disable)));
                                                      }));
                                                describe("open blend", (function () {
                                                        Wonder_jest.test("enable blend", (function () {
                                                                var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, enable)));
                                                              }));
                                                        return Wonder_jest.test("set blend func", (function () {
                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                      var blendFunc = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(blendFunc), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                      return Sinon.toCalledWith(/* array */[
                                                                                  1,
                                                                                  2
                                                                                ], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, blendFunc)));
                                                                    }));
                                                      }));
                                                return /* () */0;
                                              }));
                                        Wonder_jest.test("use no material shader->rotation_gizmo_for_editor", (function () {
                                                var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                var createProgram = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                Sinon.returns(1, Sinon.onCall(0, createProgram));
                                                Sinon.returns(2, Sinon.onCall(1, createProgram));
                                                Sinon.returns(3, Sinon.onCall(2, createProgram));
                                                var useProgram = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(createProgram), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(useProgram), undefined, /* () */0), engineState);
                                                var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                var shaderIndex = NoMaterialShaderEngineService$WonderEditor.unsafeGetNoMaterialShader("rotation_gizmo_for_editor", engineState$2);
                                                return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                Sinon.getCallCount(useProgram),
                                                                SinonTool$WonderEditor.calledWith(useProgram, ProgramToolEngine$WonderEditor.getProgram(shaderIndex, engineState$2)),
                                                                ProgramToolEngine$WonderEditor.getProgram(shaderIndex, engineState$2)
                                                              ]), /* tuple */[
                                                            1,
                                                            true,
                                                            1
                                                          ]);
                                              }));
                                        describe("send gl data", (function () {
                                                describe("send uniform data", (function () {
                                                        describe("test send no material shader data", (function () {
                                                                var _prepareCamera = function () {
                                                                  var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                  var __x = OptionService$WonderEditor.unsafeGet(MainEditorCameraTool$WonderEditor.getCurrentCameraGameObject(engineState));
                                                                  var currentCameraTransform = GameObjectComponentEngineService$WonderEditor.unsafeGetTransformComponent(__x, engineState);
                                                                  var engineState$1 = TransformEngineService$WonderEditor.lookAt(currentCameraTransform, /* tuple */[
                                                                        0,
                                                                        0,
                                                                        0
                                                                      ], TransformEngineService$WonderEditor.setLocalPosition(/* tuple */[
                                                                            0,
                                                                            2,
                                                                            3
                                                                          ], currentCameraTransform, engineState));
                                                                  StateEngineService$WonderEditor.setState(engineState$1);
                                                                  return /* () */0;
                                                                };
                                                                describe("send u_alpha", (function () {
                                                                        var _test = function (alpha, count) {
                                                                          var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                          var uniform1f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                          var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_alpha");
                                                                          var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform1f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                          DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                          return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(10, alpha, uniform1f))), count);
                                                                        };
                                                                        beforeEach((function () {
                                                                                return _prepareCamera(/* () */0);
                                                                              }));
                                                                        Wonder_jest.test("if circle gizmo is unused, send small value", (function () {
                                                                                return _test(0.1, 1);
                                                                              }));
                                                                        return Wonder_jest.test("else, send 1.0", (function () {
                                                                                      return _test(1.0, 1);
                                                                                    }));
                                                                      }));
                                                                describe("send u_color", (function () {
                                                                        return Wonder_jest.test("test send each circle gameObject->u_color", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform3f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_color");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform3f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(10, uniform3f))), 3);
                                                                                    }));
                                                                      }));
                                                                describe("send u_cameraPosInLocalCoordSystem", (function () {
                                                                        return Wonder_jest.test("send send each circle gameObject->camera pos in local coord system", (function () {
                                                                                      _prepareCamera(/* () */0);
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform3f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_cameraPosInLocalCoordSystem");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform3f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                                      var match = CameraPosUtils$WonderEditor.getCameraPos(StateEditorService$WonderEditor.getState(/* () */0), engineState$2);
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                                                      Sinon.getCallCount(Sinon.withFourArgs(10, match[0], match[1], match[2], uniform3f)),
                                                                                                      Sinon.getCallCount(Sinon.withFourArgs(10, 0, 3.0000004260849593, -2.000000135732943, uniform3f)),
                                                                                                      Sinon.getCallCount(Sinon.withFourArgs(10, -3.0000003576278687, 2, 1.0268563599424851e-7, uniform3f))
                                                                                                    ]), /* tuple */[
                                                                                                  1,
                                                                                                  1,
                                                                                                  1
                                                                                                ]);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                return /* () */0;
                                              }));
                                        describe("draw", (function () {
                                                return Wonder_jest.test("draw each circle gameObject with line_strip", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var drawElements = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(drawElements), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                              var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                              return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(OperateRotationGizmoSceneViewEditorService$WonderEditor.unsafeGetRotationXYCircleGizmo(editorState), engineState$2), engineState$2), drawElements))), 3);
                                                            }));
                                              }));
                                        describe("restore gl state", (function () {
                                                Wonder_jest.test("enable depth test", (function () {
                                                        var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                        var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                        var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                        DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                        return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(1, enable)));
                                                      }));
                                                return Wonder_jest.test("disable blend", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 10, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                              return Sinon.toCalledWith(/* array */[10], Wonder_jest.Expect[/* expect */0](Sinon.getCall(1, disable)));
                                                            }));
                                              }));
                                        return /* () */0;
                                      }));
                                return /* () */0;
                              }));
                        describe("render scale gizmos", (function () {
                                var _handleEngineState = function (engineState) {
                                  var engineState$1 = MainUtils$WonderEditor._handleEngineState(engineState);
                                  StateLogicService$WonderEditor.getAndSetEditorState(CurrentTransformGizmoSceneViewEditorService$WonderEditor.markScale);
                                  return engineState$1;
                                };
                                describe("render axis gizmos and center box gizmo", (function () {
                                        var _getLineGeometry = function (editorState, engineState) {
                                          return GameObjectComponentEngineService$WonderEditor.unsafeGetGeometryComponent(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState), engineState);
                                        };
                                        describe("prepare gl state", (function () {
                                                return Wonder_jest.test("disable depth test", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var disable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(disable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                              return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, disable)));
                                                            }));
                                              }));
                                        Wonder_jest.test("use one program", (function () {
                                                var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                var useProgram = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(useProgram), undefined, /* () */0), engineState);
                                                DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(useProgram)), 1);
                                              }));
                                        describe("send gl data", (function () {
                                                describe("send attribute", (function () {
                                                        describe("init vbo buffers when first send", (function () {
                                                                beforeEach((function () {
                                                                        return StateLogicService$WonderEditor.getAndSetEngineState(_handleEngineState);
                                                                      }));
                                                                describe("init vertex buffer", (function () {
                                                                        return Wonder_jest.test("bufferData cube geometry vertices(3 cube gameObjects+1 center box gameObject) four times and line vertices three times", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                                                      var match = GeometryEngineService$WonderEditor.createCubeGeometry(engineState);
                                                                                      var engineState$1 = match[0];
                                                                                      var cubeGeometryPoints = GeometryEngineService$WonderEditor.getGeometryVertices(match[1], engineState$1);
                                                                                      var linePoints = GeometryToolEngine$WonderEditor.getGameObjectVertices(TransformGizmosTool$WonderEditor.getLineGameObject(editorState, engineState$1), engineState$1);
                                                                                      var countTuple = /* tuple */[
                                                                                        4,
                                                                                        3
                                                                                      ];
                                                                                      var engineState$2 = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var bufferData = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var engineState$3 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(bufferData), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState$2);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$3));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                                                      Sinon.getCallCount(Sinon.withThreeArgs(1, cubeGeometryPoints, 2, bufferData)),
                                                                                                      Sinon.getCallCount(Sinon.withThreeArgs(1, linePoints, 2, bufferData))
                                                                                                    ]), countTuple);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                describe("send uniform data", (function () {
                                                        describe("test send model data", (function () {
                                                                describe("send u_mMatrix", (function () {
                                                                        return Wonder_jest.test("test send each axis->arrow and line gameObjects and center box->u_mMatrix", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniformMatrix4fv = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_mMatrix");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniformMatrix4fv), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(10, uniformMatrix4fv))), 7);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        describe("test send material data", (function () {
                                                                describe("send u_alpha", (function () {
                                                                        return Wonder_jest.test("test send axis gameObjects and center box gameObject->u_alpha with 1.0", (function () {
                                                                                      var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                                      var uniform1f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                                      var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_alpha");
                                                                                      var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform1f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                                      DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withTwoArgs(10, 1.0, uniform1f))), 1);
                                                                                    }));
                                                                      }));
                                                                describe("send u_color", (function () {
                                                                        var _prepareAndExec = function (sandbox) {
                                                                          var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                                          var uniform3f = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                                          var getUniformLocation = GLSLLocationToolEngine$WonderEditor.getUniformLocation(10, sandbox, "u_color");
                                                                          var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(getUniformLocation), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(uniform3f), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                                          DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                                          return /* tuple */[
                                                                                  10,
                                                                                  uniform3f
                                                                                ];
                                                                        };
                                                                        Wonder_jest.test("test send each axis gameObject->u_color", (function () {
                                                                                var match = _prepareAndExec(sandbox);
                                                                                return Curry._2(Wonder_jest.Expect[/* Operators */23][/* >= */2], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withOneArg(match[0], match[1]))), 3);
                                                                              }));
                                                                        return Wonder_jest.test("test send center box gameObject->u_color", (function () {
                                                                                      var match = _prepareAndExec(sandbox);
                                                                                      return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](Sinon.getCallCount(Sinon.withFourArgs(match[0], 0.800000011920929, 0.800000011920929, 0.800000011920929, match[1]))), 1);
                                                                                    }));
                                                                      }));
                                                                return /* () */0;
                                                              }));
                                                        return /* () */0;
                                                      }));
                                                return /* () */0;
                                              }));
                                        describe("draw", (function () {
                                                return Wonder_jest.test("draw each axis->arrow and line gameObjects and center box gameObject", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var drawElements = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 2, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(drawElements), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              var engineState$2 = DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                              var editorState = StateEditorService$WonderEditor.getState(/* () */0);
                                                              var match = GeometryEngineService$WonderEditor.createCubeGeometry(engineState$2);
                                                              var engineState$3 = match[0];
                                                              return Curry._2(Wonder_jest.Expect[/* Operators */23][/* = */5], Wonder_jest.Expect[/* expect */0](/* tuple */[
                                                                              Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(match[1], engineState$3), drawElements)),
                                                                              Sinon.getCallCount(Sinon.withTwoArgs(2, GeometryEngineService$WonderEditor.getIndicesCount(_getLineGeometry(editorState, engineState$3), engineState$3), drawElements))
                                                                            ]), /* tuple */[
                                                                          4,
                                                                          3
                                                                        ]);
                                                            }));
                                              }));
                                        describe("restore gl state", (function () {
                                                return Wonder_jest.test("enable depth test", (function () {
                                                              var engineState = StateEngineService$WonderEditor.unsafeGetState(/* () */0);
                                                              var enable = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
                                                              var engineState$1 = FakeGlToolEngine$WonderEditor.setFakeGl(FakeGlToolEngine$WonderEditor.buildFakeGl(sandbox, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, 1, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, Js_primitive.some(enable), undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, /* () */0), engineState);
                                                              DirectorToolEngine$WonderEditor.runWithDefaultTime(_handleEngineState(engineState$1));
                                                              return Sinon.toCalledWith(/* array */[1], Wonder_jest.Expect[/* expect */0](Sinon.getCall(0, enable)));
                                                            }));
                                              }));
                                        return /* () */0;
                                      }));
                                return /* () */0;
                              }));
                        return /* () */0;
                      }));
                return /* () */0;
              }));
        return /* () */0;
      }));

export {
  
}
/*  Not a pure module */
